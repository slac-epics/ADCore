# CONFIG_SITE

# Make any application-specific changes to the EPICS build
#   configuration variables in this file.
#
# Host/target specific settings can be specified in files named
#   CONFIG_SITE.$(EPICS_HOST_ARCH).Common
#   CONFIG_SITE.Common.$(T_A)
#   CONFIG_SITE.$(EPICS_HOST_ARCH).$(T_A)

# CHECK_RELEASE controls the consistency checking of the support
#   applications pointed to by the RELEASE* files.
# Normally CHECK_RELEASE should be set to YES.
# Set CHECK_RELEASE to NO to disable checking completely.
# Set CHECK_RELEASE to WARN to perform consistency checking but
#   continue building anyway if conflicts are found.
CHECK_RELEASE = YES

# Set this when you only want to compile this application
#   for a subset of the cross-compiled target architectures
#   that Base is built for.
CROSS_COMPILER_TARGET_ARCHS = 
ifeq '$(EPICS_HOST_ARCH)' 'rhel6-x86_64'
CROSS_COMPILER_TARGET_ARCHS     +=  linuxRT_glibc-x86_64
endif

# To install files into a location other than $(TOP) define
#   INSTALL_LOCATION here.
#INSTALL_LOCATION=</path/name/to/install/top>

# Set this when your IOC and the host use different paths
#   to access the application. This will be needed to boot
#   from a Microsoft FTP server or with some NFS mounts.
# You must rebuild in the iocBoot directory for this to
#   take effect.
#IOCS_APPL_TOP = </IOC/path/to/application/top>

# Get settings from AREA_DETECTOR, so we only have to configure once for all detectors if we want to
-include $(AREA_DETECTOR)/configure/CONFIG_SITE
-include $(AREA_DETECTOR)/configure/CONFIG_SITE.$(EPICS_HOST_ARCH)
-include $(AREA_DETECTOR)/configure/CONFIG_SITE.$(EPICS_HOST_ARCH).Common
ifdef T_A
  -include $(AREA_DETECTOR)/configure/CONFIG_SITE.Common.$(T_A)
  -include $(AREA_DETECTOR)/configure/CONFIG_SITE.$(EPICS_HOST_ARCH).$(T_A)
endif

# Build shared and static libs
ifeq (Linux, $(OS_CLASS))
	SHARED_LIBRARIES=YES
	STATIC_BUILD=YES
endif

ifndef CONFIG_SITE_TOP
CONFIG_SITE_TOP=/reg/g/pcds/pyps/config
endif
-include $(CONFIG_SITE_TOP)/common_dirs.mak

HDF5_TOP		= $(PSPKG_ROOT)/hdf5/1.8.7
HDF5_INC_DIR	= $(HDF5_TOP)/$(PKG_ARCH)/include
HDF5_LIB_DIR	= $(HDF5_TOP)/$(PKG_ARCH)/lib

SZIP_TOP		= $(PSPKG_ROOT)/szip/2.1
SZIP_INC_DIR	= $(SZIP_TOP)/$(PKG_ARCH)/include
SZIP_LIB_DIR	= $(SZIP_TOP)/$(PKG_ARCH)/lib

JPEG_TOP		= $(PSPKG_ROOT)/jpeg/6b
JPEG_INC_DIR	= $(JPEG_TOP)/$(PKG_ARCH)/include
JPEG_LIB_DIR	= $(JPEG_TOP)/$(PKG_ARCH)/lib

TIFF_TOP		= $(PSPKG_ROOT)/tiff/4.0.3
TIFF_INC_DIR	= $(TIFF_TOP)/$(PKG_ARCH)/include
TIFF_LIB_DIR	= $(TIFF_TOP)/$(PKG_ARCH)/lib

# Could go to nexusSrc/Makefile
USR_INCLUDES		+= -I$(HDF5_INC_DIR) -I$(SZIP_INC_DIR)
SHRLIB_DEPLIB_DIRS	+= $(HDF5_LIB_DIR) $(SZIP_LIB_DIR)
PROD_DEPLIB_DIRS	+= $(HDF5_LIB_DIR) $(SZIP_LIB_DIR)

# Could go to pluginSrc/Makefile
USR_INCLUDES		+= -I$(JPEG_INC_DIR) -I$(TIFF_INC_DIR)
SHRLIB_DEPLIB_DIRS	+= $(JPEG_LIB_DIR) $(TIFF_LIB_DIR)
PROD_DEPLIB_DIRS	+= $(JPEG_LIB_DIR) $(TIFF_LIB_DIR)
